<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>PontoView • Horários de Saída</title>

  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;600;800;900&display=swap" rel="stylesheet"/>

  <style>
    :root{
      --ink:#0e1b2a;

      --topA:#0b2a44;
      --topB:#2c6aa3;
      --topC:#0f3d63;

      --pad: clamp(14px, 1.8vw, 26px);
      --gap: clamp(12px, 1.4vw, 18px);

      --panel:#f1f3f6;
      --card:#ffffff;
      --line:#e7eef7;

      --radius: clamp(24px, 2.2vw, 36px);
      --radiusCard: clamp(18px, 1.8vw, 28px);

      --footerH: clamp(50px, 6vh, 74px);

      --ease: cubic-bezier(.2,.8,.2,1);
      --anim: 520ms;

      --dividerGrad: linear-gradient(90deg, rgba(44,106,163,0) 0%, rgba(44,106,163,.9) 18%, rgba(15,61,99,.95) 50%, rgba(44,106,163,.9) 82%, rgba(44,106,163,0) 100%);

      --pillDark:#3a4656;
      --pillDark2:#2f3845;
    }

    *{box-sizing:border-box}
    html,body{height:100%}

    body{
      margin:0;
      font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
      color:var(--ink);
      background:#fff;
      overflow:hidden;
    }

    .pvCard{
      width:100vw;
      height:100vh;
      display:flex;
      flex-direction:column;
      min-height:0;
      background:#fff;
    }

    /* ================= HEADER (igual lógica) ================= */
    .pvHeader{
      position:relative;
      background: linear-gradient(180deg, var(--topB) 0%, var(--topC) 42%, var(--topA) 100%);
      color:#fff;
      padding: clamp(14px, 1.8vw, 22px) var(--pad);
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:var(--gap);
      flex:0 0 auto;
      min-width:0;
      border-bottom: 1px solid rgba(255,255,255,.12);
      box-shadow: inset 0 -1px 0 rgba(255,255,255,.18);
    }
    .pvHeader::before{
      content:"";
      position:absolute;
      inset:0;
      pointer-events:none;
      background:
        radial-gradient(900px 120px at 50% 0%, rgba(255,255,255,.22), rgba(255,255,255,0) 65%),
        linear-gradient(180deg, rgba(0,0,0,.10), rgba(0,0,0,0) 42%);
      opacity:.95;
    }
    .pvLeft, .pvRight{position:relative; z-index:1;}
    .pvLeft{
      display:flex;
      align-items:center;
      gap: clamp(12px, 1.5vw, 18px);
      min-width:0;
      flex:1 1 auto;
    }

    /* badge glass (4 cantos arredondados, estilo PontoView) */
    .pvBadge{
      width: clamp(44px, 4.2vw, 64px);
      height: clamp(44px, 4.2vw, 64px);
      border-radius: 18px;
      background: rgba(255,255,255,.14);
      border: 1px solid rgba(255,255,255,.24);
      box-shadow:
        inset 0 1px 0 rgba(255,255,255,.20),
        0 14px 28px rgba(0,0,0,.14);
      backdrop-filter: blur(10px);
      display:grid;
      place-items:center;
      flex:0 0 auto;
    }
    .pvBadge svg{width:62%; height:62%; opacity:.98}

    .pvTitles{display:flex; flex-direction:column; gap:6px; min-width:0;}
    .pvTitle{
      margin:0;
      font-size: clamp(18px, 2.1vw, 34px);
      font-weight:900;
      letter-spacing:.06em;
      text-transform:uppercase;
      white-space:nowrap; overflow:hidden; text-overflow:ellipsis;
      line-height:1.02;
    }
    .pvSubtitle{
      font-size: clamp(11px, 1.0vw, 15px);
      font-weight:900;
      letter-spacing:.14em;
      text-transform:uppercase;
      opacity:.92;
      white-space:nowrap; overflow:hidden; text-overflow:ellipsis;
    }

    .pvRight{
      display:flex;
      align-items:center;
      justify-content:flex-end;
      min-width:max-content;
    }
    .clockPill{
      user-select:none;
      font-size: clamp(12px, 1.1vw, 16px);
      font-weight: 900;
      letter-spacing:.10em;
      text-transform: uppercase;
      color:#fff;
      padding: clamp(10px, 1.1vw, 14px) clamp(14px, 1.5vw, 22px);
      border-radius: 999px;
      background: rgba(255,255,255,.16);
      border: 1px solid rgba(255,255,255,.22);
      box-shadow:
        inset 0 1px 0 rgba(255,255,255,.18),
        0 12px 26px rgba(0,0,0,.14);
      backdrop-filter: blur(10px);
      white-space:nowrap;
    }

    /* ================= MAIN ================= */
    .pvMain{
      flex:1 1 auto;
      min-height:0;
      padding: var(--pad);
      background:#fff;
      overflow:hidden;
    }

    .shell{
      height:100%;
      border-radius: var(--radius);
      background: var(--panel);
      padding: clamp(12px, 1.4vw, 18px);
      display:flex;
      flex-direction:column;
      gap: clamp(10px, 1.2vw, 16px);
      min-height:0;
      overflow:hidden;
    }

    /* Lista de cards (sem interação; sem rolagem visível) */
    .list{
      flex:1 1 auto;
      min-height:0;
      display:flex;
      flex-direction:column;
      gap: clamp(10px, 1.2vw, 14px);
      overflow:hidden;
    }

    .rowCard{
      background: rgba(255,255,255,.88);
      border: 1px solid rgba(231,238,247,.95);
      border-radius: var(--radiusCard);
      padding: clamp(12px, 1.3vw, 16px);
      display:grid;
      grid-template-columns: 10px 1fr auto;
      align-items:center;
      gap: clamp(12px, 1.4vw, 18px);
      min-width:0;
      box-shadow: 0 10px 22px rgba(2,10,23,.06);
      backdrop-filter: blur(6px);
      position:relative;
      overflow:hidden;
    }

    /* faixa de cor da linha */
    .stripe{
      width:10px; height:100%;
      border-radius: 999px;
      background: #2c6aa3;
      box-shadow: inset 0 0 0 1px rgba(255,255,255,.35);
    }

    .mid{
      min-width:0;
      display:flex;
      flex-direction:column;
      gap: 8px;
    }
    .topLine{
      display:flex;
      align-items:baseline;
      gap: 10px;
      min-width:0;
      flex-wrap:wrap;
    }
    .routeNo{
      font-size: clamp(22px, 2.4vw, 40px);
      font-weight: 900;
      letter-spacing:-0.02em;
      line-height:1;
      color:#0e1b2a;
      white-space:nowrap;
    }
    .routeName{
      font-size: clamp(12px, 1.1vw, 16px);
      font-weight: 900;
      letter-spacing:.10em;
      text-transform: uppercase;
      color:#2a3a50;
      white-space:nowrap;
      overflow:hidden;
      text-overflow:ellipsis;
      min-width:0;
      max-width: 100%;
      opacity:.92;
    }

    .metaLine{
      display:flex;
      align-items:center;
      gap: 10px;
      min-width:0;
      flex-wrap:wrap;
    }
    .pill{
      display:inline-flex;
      align-items:center;
      gap:10px;
      padding: 10px 12px;
      border-radius:999px;
      background: #fff;
      border:1px solid rgba(231,233,238,.95);
      font-size: 12px;
      font-weight: 900;
      letter-spacing:.08em;
      text-transform: uppercase;
      color:#23344a;
      white-space:nowrap;
      box-shadow: 0 8px 18px rgba(0,0,0,.04);
    }
    .dot{
      width:10px;height:10px;border-radius:999px;
      background: currentColor;
      opacity:.85;
      box-shadow: 0 0 0 3px rgba(15,61,99,.10);
    }

    /* horário (lado direito) */
    .timeBox{
      display:flex;
      flex-direction:column;
      align-items:flex-end;
      gap: 8px;
      min-width:max-content;
    }
    .timeBig{
      font-size: clamp(26px, 2.6vw, 46px);
      font-weight: 900;
      letter-spacing:.02em;
      line-height:1;
      font-variant-numeric: tabular-nums;
      color:#0e1b2a;
      white-space:nowrap;
    }
    .timeSub{
      font-size: 12px;
      font-weight: 900;
      letter-spacing:.12em;
      text-transform: uppercase;
      color:#3b4b62;
      opacity:.92;
      white-space:nowrap;
    }

    /* ================= PROGRESS + FOOTER ================= */
    /* barra de progresso colada na “linha em degradê” (acima do rodapé) */
    .progressWrap{
      flex:0 0 auto;
      padding: 0 var(--pad);
      background:#fff;
    }
    .divider{
      height: 4px;
      border-radius: 999px;
      background: var(--dividerGrad);
      position:relative;
      overflow:hidden;
    }
    .bar{
      position:absolute;
      inset:0;
      width: 0%;
      background: linear-gradient(90deg, rgba(255,255,255,.10), rgba(255,255,255,.18));
      mix-blend-mode: screen;
      transform-origin:left center;
    }

    .pvFooter{
      flex:0 0 auto;
      height: var(--footerH);
      display:flex;
      align-items:center;
      justify-content:space-between;
      padding: 10px var(--pad);
      background:#fff;
      gap: 12px;
      min-width:0;
    }
    .pvFooterLeft{
      font-size: 11px;
      font-weight: 900;
      letter-spacing:.12em;
      text-transform: uppercase;
      color:#3b4b62;
      opacity:.95;
      white-space:nowrap;
      overflow:hidden;
      text-overflow:ellipsis;
      min-width: 0;
    }

    /* badges da empresa NO RODAPÉ (cinza escuro) */
    .brands{
      display:flex;
      gap: 10px;
      align-items:center;
      justify-content:center;
      min-width:0;
      flex: 1 1 auto;
      overflow:hidden;
    }
    .brandPill{
      display:inline-flex;
      align-items:center;
      gap:10px;
      padding: 10px 14px;
      border-radius: 999px;
      background: linear-gradient(180deg, var(--pillDark) 0%, var(--pillDark2) 100%);
      border: 1px solid rgba(255,255,255,.12);
      color:#fff;
      font-weight: 900;
      letter-spacing:.10em;
      text-transform: uppercase;
      font-size: 11px;
      white-space:nowrap;
      box-shadow: 0 10px 18px rgba(0,0,0,.14);
      max-width: 100%;
    }
    .brandDot{
      width:10px;height:10px;border-radius:999px;
      background: var(--c, #2c6aa3);
      box-shadow: 0 0 0 3px rgba(255,255,255,.10);
      flex:0 0 auto;
    }
    .brandTxt{
      overflow:hidden;
      text-overflow:ellipsis;
      max-width: 20vw;
    }

    .pvLogo{
      height: clamp(16px, 2.3vh, 22px);
      width:auto;
      display:block;
      opacity:.92;
      flex:0 0 auto;
    }

    /* ================= RESPONSIVO (mesma lógica) ================= */
    @media (orientation: portrait){
      /* mantém layout, só compacta pra caber sem sobrepor */
      .shell{ padding: clamp(10px, 1.2vw, 14px); }
      .rowCard{ padding: 12px; grid-template-columns: 10px 1fr auto; }
      .routeNo{ font-size: clamp(20px, 4.4vw, 38px); }
      .timeBig{ font-size: clamp(24px, 5.2vw, 44px); }
      .pill{ padding: 9px 11px; font-size: 11px; }
      .brandTxt{ max-width: 24vw; }
    }

    @media (max-width: 720px){
      .brands{ justify-content:flex-start; }
      .brandTxt{ max-width: 28vw; }
    }

    @media (max-height: 620px){
      /* reduz “detalhes” para caber em telas baixas */
      .pill{ padding: 8px 10px; }
      .metaLine{ gap:8px; }
      .rowCard{ padding: 10px; }
    }
  </style>
</head>

<body>
  <div class="pvCard" id="panel" data-title="HORÁRIOS DE SAÍDA" data-subtitle="LOCALIZAÇÃO">
    <header class="pvHeader">
      <div class="pvLeft">
        <div class="pvBadge" aria-hidden="true" id="hdrIcon"></div>
        <div class="pvTitles">
          <h1 class="pvTitle" id="title"></h1>
          <div class="pvSubtitle" id="subtitle"></div>
        </div>
      </div>

      <div class="pvRight">
        <div class="clockPill" id="clock">HH:MM</div>
      </div>
    </header>

    <!-- (sub barra eliminada, como pediu) -->

    <main class="pvMain">
      <div class="shell">
        <div class="list" id="list"></div>
      </div>
    </main>

    <!-- barra de progresso colada na “linha degradê”, acima do rodapé -->
    <div class="progressWrap" aria-hidden="true">
      <div class="divider"><div class="bar" id="bar"></div></div>
    </div>

    <footer class="pvFooter" aria-label="Rodapé PontoView">
      <div class="pvFooterLeft" id="updated">ATUALIZADO • —</div>

      <!-- badges das empresas (antes estavam dentro dos cards; agora ficam aqui) -->
      <div class="brands" id="brands"></div>

      <img class="pvLogo" src="./assets/logo-pontoview.png" alt="Logo PontoView" />
    </footer>
  </div>

  <script>
    /* ========= Ícone do cabeçalho (cloud-like/horário) ========= */
    function svgDepart(){
      return `
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.9" stroke-linecap="round" stroke-linejoin="round">
        <path d="M20 17.5a4.5 4.5 0 0 0-1.3-8.8A6 6 0 0 0 6.2 10.2 3.8 3.8 0 0 0 7 17.5h13z"/>
        <path d="M12 12v4"/>
        <path d="M12 12h3"/>
      </svg>`;
    }

    /* ========= DEMO DATA (substitua pela sua fonte real) =========
       Mantém cards com: cores, números, linhas, horários etc.
       -> Importante: NÃO tem "badge de empresa" dentro do card (como você pediu).
    */
    const rows = [
      {
        lineColor: "#2c6aa3",
        routeNo: "01",
        routeName: "CENTRO • BAIRRO",
        pills: [
          { label:"PLATAFORMA 2", color:"#0f3d63" },
          { label:"PRÓXIMA", color:"#0f3d63" }
        ],
        time: "14:55",
        sub: "SAÍDA"
      },
      {
        lineColor: "#16a34a",
        routeNo: "12",
        routeName: "RODOVIÁRIA • UNIVERSIDADE",
        pills: [
          { label:"PLATAFORMA 1", color:"#14532d" },
          { label:"EM 10 MIN", color:"#14532d" }
        ],
        time: "15:05",
        sub: "SAÍDA"
      },
      {
        lineColor: "#f59e0b",
        routeNo: "07",
        routeName: "SHOPPING • HOSPITAL",
        pills: [
          { label:"PLATAFORMA 3", color:"#7c4a00" },
          { label:"EMBARQUE", color:"#7c4a00" }
        ],
        time: "15:20",
        sub: "SAÍDA"
      },
      {
        lineColor: "#ef4444",
        routeNo: "05",
        routeName: "AEROPORTO • CENTRO",
        pills: [
          { label:"PLATAFORMA 4", color:"#7f1d1d" },
          { label:"ATRASO", color:"#7f1d1d" }
        ],
        time: "15:35",
        sub: "PREVISTO"
      },
      {
        lineColor: "#7c3aed",
        routeNo: "22",
        routeName: "PRAIA • TERMINAL",
        pills: [
          { label:"PLATAFORMA 2", color:"#3b1b7a" },
          { label:"EM 30 MIN", color:"#3b1b7a" }
        ],
        time: "15:50",
        sub: "SAÍDA"
      }
    ];

    /* ========= Empresas (badges no rodapé) ========= */
    const companies = [
      { name: "Viação Alfa", color: "#2c6aa3" },
      { name: "Expresso Beta", color: "#16a34a" },
      { name: "Trans Gama", color: "#f59e0b" }
    ];

    /* ========= Render ========= */
    const list = document.getElementById("list");
    const brands = document.getElementById("brands");

    function renderRows(maxRows){
      list.innerHTML = "";
      rows.slice(0, maxRows).forEach(r=>{
        const el = document.createElement("div");
        el.className = "rowCard";
        el.innerHTML = `
          <div class="stripe" style="background:${r.lineColor}"></div>

          <div class="mid">
            <div class="topLine">
              <div class="routeNo">${r.routeNo}</div>
              <div class="routeName">${r.routeName}</div>
            </div>
            <div class="metaLine">
              ${r.pills.map(p=>`
                <span class="pill" style="color:${p.color}">
                  <span class="dot"></span>${p.label}
                </span>
              `).join("")}
            </div>
          </div>

          <div class="timeBox">
            <div class="timeBig">${r.time}</div>
            <div class="timeSub">${r.sub}</div>
          </div>
        `;
        list.appendChild(el);
      });
    }

    function renderCompanies(){
      brands.innerHTML = "";
      companies.forEach(c=>{
        const pill = document.createElement("div");
        pill.className = "brandPill";
        pill.style.setProperty("--c", c.color);
        pill.innerHTML = `<span class="brandDot"></span><span class="brandTxt">${c.name}</span>`;
        brands.appendChild(pill);
      });
    }

    /* ========= Responsivo sem rolagem: ajusta quantidade de cards ========= */
    function computeMaxRows(){
      const h = window.innerHeight;
      const portrait = window.matchMedia && window.matchMedia("(orientation: portrait)").matches;

      // valores conservadores pra nunca estourar e não sobrepor
      if (portrait){
        if (h < 720) return 4;
        return 5;
      }
      if (h < 620) return 4;
      return 5;
    }

    /* ========= Clock + Updated ========= */
    function pad2(n){ return String(n).padStart(2,"0"); }
    function hhmm(d=new Date()){ return `${pad2(d.getHours())}:${pad2(d.getMinutes())}`; }
    function ddmm_hhmm(d=new Date()){
      return `${pad2(d.getDate())}/${pad2(d.getMonth()+1)}, ${hhmm(d)}`;
    }

    function tick(){
      document.getElementById("clock").textContent = hhmm();
      document.getElementById("updated").textContent = `ATUALIZADO • ${ddmm_hhmm()}`;
    }

    /* ========= Barra de progresso (ciclo automático) ========= */
    const CYCLE_MS = 16000; // ciclo visual (troca/atualização)
    const bar = document.getElementById("bar");
    let t0 = performance.now();

    function animateBar(now){
      const p = ((now - t0) % CYCLE_MS) / CYCLE_MS;
      bar.style.width = `${Math.max(2, p*100)}%`;
      requestAnimationFrame(animateBar);
    }

    /* ========= Boot ========= */
    document.getElementById("hdrIcon").innerHTML = svgDepart();
    document.getElementById("title").textContent = document.getElementById("panel").dataset.title || "HORÁRIOS DE SAÍDA";
    document.getElementById("subtitle").textContent = document.getElementById("panel").dataset.subtitle || "LOCALIZAÇÃO";

    renderCompanies();
    tick();
    setInterval(tick, 1000);

    function rerender(){
      renderRows(computeMaxRows());
    }
    rerender();
    window.addEventListener("resize", ()=> setTimeout(rerender, 120));

    requestAnimationFrame(animateBar);

    /* (Opcional) se você quiser “rotacionar” os cards automaticamente sem interação:
       aqui só fica pronto, sem mexer no layout.
    */
    let page = 0;
    setInterval(()=>{
      const maxRows = computeMaxRows();
      const totalPages = Math.max(1, Math.ceil(rows.length / maxRows));
      page = (page + 1) % totalPages;
      const sliceStart = page * maxRows;
      const sliceEnd = sliceStart + maxRows;

      list.innerHTML = "";
      rows.slice(sliceStart, sliceEnd).forEach(r=>{
        const el = document.createElement("div");
        el.className = "rowCard";
        el.style.opacity = "0";
        el.style.transform = "translateY(10px)";
        el.style.transition = "opacity 520ms var(--ease), transform 520ms var(--ease)";
        el.innerHTML = `
          <div class="stripe" style="background:${r.lineColor}"></div>
          <div class="mid">
            <div class="topLine">
              <div class="routeNo">${r.routeNo}</div>
              <div class="routeName">${r.routeName}</div>
            </div>
            <div class="metaLine">
              ${r.pills.map(p=>`
                <span class="pill" style="color:${p.color}">
                  <span class="dot"></span>${p.label}
                </span>
              `).join("")}
            </div>
          </div>
          <div class="timeBox">
            <div class="timeBig">${r.time}</div>
            <div class="timeSub">${r.sub}</div>
          </div>
        `;
        list.appendChild(el);
        requestAnimationFrame(()=>{ el.style.opacity="1"; el.style.transform="translateY(0)"; });
      });

      // reinicia a barra visual junto do “page”
      t0 = performance.now();
    }, CYCLE_MS);
  </script>
</body>
</html>
